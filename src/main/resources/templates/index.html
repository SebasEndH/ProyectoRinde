<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width initial-scale=1.0" />
    <title th:text="${titulo}">Rinde</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />
    <link th:href="@{/CSS/style.css}" rel="stylesheet" />
    <link th:href="@{/img/icon.svg}" rel="shortcut icon" />
  </head>
  <body>
    <!-- Barra de navegación -->
    <div th:replace="fragments/navbar :: navbar-principal"></div>
    

    <!-- Seccion Inicio -->
    <header
      id="inicio"
      class="text-white text-center vh-100 d-flex flex-column justify-content-center align-items-center position-relative"
    >
      <!-- Video de fondo -->
      <video
        autoplay
        muted
        loop
        playsinline
        class="position-absolute w-100 h-100"
        style="object-fit: cover; z-index: -2"
      >
        <source
          th:src="@{/img/fondo.mp4}"
          type="video/mp4"
        />
        Tu navegador no soporta videos en HTML5.
      </video>

      <!-- Filtro oscuro -->
      <div
        class="position-absolute top-0 start-0 w-100 h-100"
        style="background: rgba(0, 0, 0, 0.5); z-index: -1"
      ></div>

      <!-- Contenido encima del video -->
      <img
        class="icon mb-3"
        th:src="@{/img/icon.svg}"
        alt="Icono de Pomodoro"
      />
      <h1 class="display-3">Bienvenido a Rinde</h1>
      <p class="lead">Descubre la técnica Pomodoro</p>
      <a class="btn btn-outline-black btn-lg mt-3 nav-link" href="#blanco1"
        >Aprender más</a
      >
    </header>

    <p id="blanco1"></p>

    <!-- Seccion Servicios -->
    <section id="info" class="container py-5">
      <h2 class="text-center mb-4">Sobre la técnica Pomodoro</h2>
      <div class="row text-center">
        <div class="prin col-md-4">
          <div class="sobre card shadow-sm">
            <video
              src="https://www.pexels.com/es-es/download/video/1851768/"
              autoplay
              muted
              loop
              class="card-img-top"
            ></video>
            <div class="card-body">
              <h5 class="card-title">¿Qué es Pomodoro?</h5>
              <p class="card-text">
                Es un método que ayuda a la administración del tiempo, mantener
                un ritmo de trabajo sostenible y aumentar la productividad
                enfocándose en una sola actividad.
              </p>
              <p class="text-muted">Pomodoro significa tomate en italiano</p>
            </div>
          </div>
        </div>
        <div class="sobre col-md-4">
          <div class="card shadow-sm">
            <video
              src="https://www.pexels.com/es-es/download/video/6339299/"
              autoplay
              muted
              loop
              class="card-img-top"
            ></video>
            <div class="card-body">
              <h5 class="card-title">Cómo funciona...</h5>
              <p class="card-text">
                Divide el trabajo en intervalos de 25 minutos llamados
                pomodoros. Cada pomodoro se sigue de una pausa corta de 5
                minutos. Tras completar 4 pomodoros, se toma una pausa larga de
                15-30 minutos.
              </p>
            </div>
          </div>
        </div>

        <div class="sobre col-md-4">
          <div class="card shadow-sm">
            <video
              src="https://cdn.pixabay.com/video/2021/05/25/75271-555047154_large.mp4"
              autoplay
              muted
              loop
              class="card-img-top"
            ></video>
            <div class="card-body">
              <h5 class="card-title">Principios básicos</h5>
              <p class="card-text">
                Enfocarse en una sola tarea durante cada pomodoro.<br />
                Registrar el número de pomodoros completados.<br />
                Ajustar la duración de pausas según necesidades.
              </p>
            </div>
          </div>
        </div>
      </div>
      <p id="blanco"></p>
      <p id="blanco"></p>
      <p id="blanco"></p>
    </section>

    <!--Seccion donde se comenta que podrá gestionar sus tareas-->
    <section id="tareas" class="bg-light py-5">
      <div class="container text-center">
        <h2 class="mb-4">Gestiona tus tareas con Rinde</h2>
        <p class="lead mb-4">
          Organiza y prioriza tus tareas diarias para maximizar tu
          productividad.
        </p>
        <div class="mb-3">
            <a class="btn btn-outline-primary" th:href="@{/tareas}">Administrar tareas</a>
        </div>
      </div>
    </section>

    <!--Seccion donde se comenta que podrá ver sus estadísiticas usando rinde-->
    <section id="estadisticas" class="py-5">
      <div class="container text-center">
        <h2 class="mb-4">Visualiza tu progreso</h2>
        <p class="lead mb-4">
          Accede a estadísticas detalladas sobre tu rendimiento y mejora
          continua.
        </p>
          <div class="mb-3">
              <a class="btn btn-outline-secondary">Próximamente...</a>
          </div>
      </div>
    </section>




    <!-- Mensaje de error de login (flash) -->
    <div th:if="${loginError}" class="container position-absolute" style="top:80px; left:50%; transform:translateX(-50%); z-index:1050;">
      <div class="alert alert-danger mb-0" th:text="${loginError}"></div>
    </div>


   <!-- &lt;!&ndash; Nuevo: Modal de registro &ndash;&gt;
    <div class="modal fade" id="registerModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Registro de Usuario</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            &lt;!&ndash; muestra el mensaje de error de registro si existe &ndash;&gt;
            <div th:if="${registroError}" class="alert alert-danger" th:text="${registroError}"></div>

            <form id="registerForm" method="post" th:action="@{/registro}">

              <div class="mb-3">
                <label for="nombreReg" class="form-label">Nombre</label>
                <input type="text" id="nombreReg" name="nombre" class="form-control" required />
              </div>
              <div class="mb-3">
                <label for="emailReg" class="form-label">Correo</label>
                <input type="email" id="emailReg" name="email" class="form-control" required />
              </div>
              <div class="mb-3">
                <label for="passwordReg" class="form-label">Contraseña</label>
                <input type="password" id="passwordReg" name="password" class="form-control" required />
              </div>
              <button type="submit" class="btn btn-primary w-100">Registrar</button>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" id="backToLoginBtn" class="btn btn-link">Volver a iniciar sesión</button>
          </div>
        </div>
      </div>
    </div>-->

    <!--Footer-->
    <footer class="bg-dark text-white text-center py-3">
      <p class="mb-0">2025 Rinde. Todos los derechos reservados</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Script para alternar modales -->
    <script>
      (function () {
        var registroBtn = document.getElementById('registroBtn');
        var backToLoginBtn = document.getElementById('backToLoginBtn');
        var loginModalEl = document.getElementById('loginModal');
        var registerModalEl = document.getElementById('registerModal');

        if (registroBtn && loginModalEl && registerModalEl) {
          registroBtn.addEventListener('click', function () {
            var loginModalInstance = bootstrap.Modal.getInstance(loginModalEl) || new bootstrap.Modal(loginModalEl);
            loginModalInstance.hide();
            var registerModal = new bootstrap.Modal(registerModalEl);
            registerModal.show();
          });
        }

        if (backToLoginBtn && loginModalEl && registerModalEl) {
          backToLoginBtn.addEventListener('click', function () {
            var registerModalInstance = bootstrap.Modal.getInstance(registerModalEl) || new bootstrap.Modal(registerModalEl);
            registerModalInstance.hide();
            var loginModal = new bootstrap.Modal(loginModalEl);
            loginModal.show();
          });
        }
      })();
    </script>

    <!-- Si hay error de registro, abrir modal de registro al cargar -->
    <div th:if="${registroError}">
      <script>
        document.addEventListener('DOMContentLoaded', function () {
          var registerModal = new bootstrap.Modal(document.getElementById('registerModal'));
          registerModal.show();
        });
      </script>
    </div>

    <script th:src="@{/JS/script.js}"></script>
  </body>
</html>
